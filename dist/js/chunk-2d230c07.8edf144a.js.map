{"version":3,"sources":["webpack:///./src/components/pages/library/Search/Search.vue?7c6a","webpack:///src/components/pages/library/Search/Search.vue","webpack:///./src/components/pages/library/Search/Search.vue?435d","webpack:///./src/components/pages/library/Search/Search.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","model","value","callback","$$v","filter","expression","on","$event","$router","push","titulos","campos","scopedSlots","_u","key","fn","data","item","reservado","_s","dataDevolucao","style","carregando","index","indexTituloReservado","reservaTitulo","staticStyle","staticRenderFns","$store","commit","label","computed","getters","methods","titulo","titulosNovos","indexOf","setTimeout","tituloAlterado","reservadoPorMim","component"],"mappings":"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","file":"js/chunk-2d230c07.8edf144a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-row',{staticClass:\"mt-3 mb-2\"},[_c('b-col',{staticClass:\"text-center text-md-left my-1 my-md-0\",attrs:{\"lg\":\"4\"}},[_c('h4',[_c('i',{staticClass:\"fa fa-arrow-right\"}),_vm._v(\"Consultar Títulos\")])]),_c('b-col',{staticClass:\"text-center my-1 my-md-0\",attrs:{\"lg\":\"4\"}},[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-form-input',{attrs:{\"type\":\"search\",\"id\":\"filterInput\",\"placeholder\":\"Procurar um título\"},model:{value:(_vm.filter),callback:function ($$v) {_vm.filter=$$v},expression:\"filter\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"disabled\":!_vm.filter},on:{\"click\":function($event){_vm.filter = ''}}},[_vm._v(\"Limpar\")])],1)],1)],1),_c('b-col',{staticClass:\"text-center text-md-right my-1 my-md-0\",attrs:{\"lg\":\"4\"}},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.$router.push('loan')}}},[_vm._v(\"Minhas Reservas\")])],1)],1),_c('b-row',{staticClass:\"mt-2\"},[_c('b-col',[_c('b-table',{attrs:{\"items\":_vm.titulos,\"fields\":_vm.campos,\"filter\":_vm.filter,\"responsive\":\"\",\"stacked\":\"md\",\"show-empty\":\"\",\"empty-filtered-text\":\"Não há registros para exibir com as configurações selecionadas\",\"small\":\"\",\"bordered\":\"\",\"table-class\":\"text-center\"},scopedSlots:_vm._u([{key:\"cell(reservado)\",fn:function(data){return [(!!data.item.reservado)?_c('span',{staticClass:\"text-danger\"},[_vm._v(\"Já reservado\")]):_c('span',{staticClass:\"text-success\"},[_vm._v(\"Disponível\")])]}},{key:\"cell(dataDevolucao)\",fn:function(data){return [_c('span',[_vm._v(_vm._s(data.item.dataDevolucao || '---'))])]}},{key:\"cell(acao)\",fn:function(data){return [(!!data.item.reservado)?_c('span',[_vm._v(\"\\n                              ---\\n                          \")]):_c('b-button',{style:({'min-width': '90px'}),attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"disabled\":_vm.carregando && (data.index != _vm.indexTituloReservado)},on:{\"click\":function($event){return _vm.reservaTitulo(data.item)}}},[(_vm.carregando && (data.index == _vm.indexTituloReservado))?_c('b-spinner',{staticStyle:{\"width\":\"1.5rem\",\"height\":\"1.5rem\"},attrs:{\"label\":\"Spinning\"}}):_c('span',[_vm._v(\"Reservar\")])],1)]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n      <b-row class=\"mt-3 mb-2\">\r\n        <b-col lg=\"4\" class=\"text-center text-md-left my-1 my-md-0\">\r\n          <h4> <i class=\"fa fa-arrow-right\"></i>Consultar Títulos</h4> \r\n        </b-col>          \r\n        <b-col lg=\"4\" class=\"text-center my-1 my-md-0\">\r\n          <b-input-group size=\"sm\">\r\n            <b-form-input\r\n              v-model=\"filter\"\r\n              type=\"search\"\r\n              id=\"filterInput\"\r\n              placeholder=\"Procurar um título\"\r\n            ></b-form-input>\r\n            <b-input-group-append>\r\n              <b-button :disabled=\"!filter\" @click=\"filter = ''\">Limpar</b-button>\r\n            </b-input-group-append>\r\n          </b-input-group> \r\n        </b-col>\r\n        <b-col lg=\"4\" class=\"text-center text-md-right my-1 my-md-0\">\r\n            <b-button @click=\"$router.push('loan')\" size=\"sm\">Minhas Reservas</b-button>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row class=\"mt-2\">\r\n          <b-col>\r\n            <b-table  :items=\"titulos\" \r\n                        :fields=\"campos\"\r\n                        :filter=\"filter\"\r\n                        responsive\r\n                        stacked=\"md\"\r\n                        show-empty\r\n                        empty-filtered-text=\"Não há registros para exibir com as configurações selecionadas\"\r\n                        small\r\n                        bordered\r\n                        table-class=\"text-center\"\r\n                        >\r\n\r\n                        <template v-slot:cell(reservado)=\"data\">\r\n                            <span v-if=\"!!data.item.reservado\" class=\"text-danger\">Já reservado</span>\r\n                            <span v-else class=\"text-success\">Disponível</span>\r\n                        </template>      \r\n\r\n                        <template v-slot:cell(dataDevolucao)=\"data\">\r\n                            <span>{{data.item.dataDevolucao || '---'}}</span>\r\n                        </template>                   \r\n\r\n                        <template v-slot:cell(acao)=\"data\">\r\n                            <span v-if=\"!!data.item.reservado\">\r\n                                ---\r\n                            </span>\r\n                            <b-button   v-else \r\n                                        :style=\"{'min-width': '90px'}\"\r\n                                        variant=\"primary\" \r\n                                        size=\"sm\"\r\n                                        @click=\"reservaTitulo(data.item)\"\r\n                                        :disabled=\"carregando && (data.index != indexTituloReservado)\">\r\n                                    <b-spinner style=\"width: 1.5rem; height: 1.5rem;\" v-if=\"carregando && (data.index == indexTituloReservado)\" label=\"Spinning\"></b-spinner>\r\n                                    <span v-else>Reservar</span>                                        \r\n                            </b-button>\r\n                        </template>   \r\n\r\n            </b-table>              \r\n          </b-col>\r\n      </b-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    created() {\r\n        this.$store.commit('tituloSelecionado', null);\r\n    },\r\n    data() {\r\n        return {\r\n            filter: null,\r\n            campos: [\r\n                {\r\n                  key: 'nomeDoLivro',\r\n                  label: 'Nome do livro',\r\n                },     \r\n                {\r\n                  key: 'reservado',\r\n                  label: 'Disponibilidade',\r\n                },                             \r\n                {\r\n                  key: 'dataDevolucao',\r\n                  label: 'Data de Devolução',\r\n                },                             \r\n                {\r\n                  key: 'acao',\r\n                  label: 'Ação',\r\n                },         \r\n            ],  \r\n            indexTituloReservado: null              \r\n        }\r\n    },\r\n    computed: {\r\n        titulos: {\r\n            get() {\r\n                return this.$store.getters.titulos\r\n            },\r\n            set(titulos) {\r\n                this.$store.commit('titulos', titulos)\r\n            }\r\n        },\r\n        carregando: {\r\n            get() {\r\n                return this.$store.getters.carregando\r\n            },\r\n            set(value) {\r\n                this.$store.commit('carregando', value)\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        reservaTitulo(titulo) {\r\n            this.carregando = true\r\n            let titulosNovos = [...this.titulos]\r\n            this.indexTituloReservado = titulosNovos.indexOf(titulo)            \r\n            setTimeout(() => {\r\n                let tituloAlterado = titulo = {...titulo, dataDevolucao:'12/12/2019' , reservado: true, reservadoPorMim: true}\r\n                titulosNovos[this.indexTituloReservado] = tituloAlterado\r\n                this.titulos = titulosNovos                \r\n                this.$store.commit('tituloSelecionado', tituloAlterado);\r\n                this.$store.commit('tipoMsg', 'success');\r\n                this.$store.commit('mensagem', 'Livro reservado com sucesso!');\r\n            }, 1500);            \r\n            setTimeout(() => {\r\n                this.$store.commit('tipoMsg', '');\r\n                this.$store.commit('mensagem', '');                \r\n                this.$router.push('loan')\r\n                this.carregando = false\r\n            }, 3000);            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=027d234a&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}